@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fonts are now handled in layout.tsx via next/font/google */

/* ===== LIGHT THEME (DEFAULT) ===== */
:root,
.light {
  /* Canvas & Backgrounds */
  --background: #FAFAF7;
  --canvas-bg: #FAFAF7;
  --node-bg: #FAFAF7;
  --grid-color: #000000;
  --grid-opacity: 0.2;

  /* Text Colors */
  --foreground: #000000;
  --text-primary: #000000;
  --text-secondary: #6b7280;
  --text-tertiary: #9ca3af;

  /* Borders & Strokes */
  --border-primary: #000000;
  --border-secondary: rgba(0, 0, 0, 0.2);
  --border-tertiary: rgba(0, 0, 0, 0.1);

  /* UI Chrome */
  --toolbar-bg: rgba(255, 255, 255, 0.8);
  --toolbar-border: rgba(0, 0, 0, 0.05);
  --node-header-bg: #FAFAF7;

  /* Interactive States */
  --hover-bg: rgba(0, 0, 0, 0.05);
  --hover-border: rgba(0, 0, 0, 0.4);
  --selected-border: #000000;

  /* Sockets & Wires */
  --socket-empty: #FAFAF7;
  --socket-connected: #22c55e;
  --socket-connected-dark: #16a34a;
  --socket-hover-valid: #4ade80;
  --socket-hover-invalid: #ef4444;
  --wire-color: #000000;
  --wire-selected: #3b82f6;
  --wire-temp: #A1A1AA;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #e5e5e5;
  --scrollbar-thumb-hover: #000000;

  /* Shadows */
  --shadow-editorial: 0 2px 10px rgba(0, 0, 0, 0.03), 0 10px 25px rgba(0, 0, 0, 0.04);
  --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.1);
}

/* ===== DARK THEME ===== */
.dark {
  /* Canvas & Backgrounds */
  --background: #0a0a0a;
  --canvas-bg: #0a0a0a;
  --node-bg: #1a1a1a;
  --grid-color: #ffffff;
  --grid-opacity: 0.15;

  /* Text Colors */
  --foreground: #ffffff;
  --text-primary: #ffffff;
  --text-secondary: #9ca3af;
  --text-tertiary: #6b7280;

  /* Borders & Strokes */
  --border-primary: #404040;
  --border-secondary: rgba(255, 255, 255, 0.2);
  --border-tertiary: rgba(255, 255, 255, 0.1);

  /* UI Chrome */
  --toolbar-bg: rgba(26, 26, 26, 0.8);
  --toolbar-border: rgba(255, 255, 255, 0.1);
  --node-header-bg: #1a1a1a;

  /* Interactive States */
  --hover-bg: rgba(255, 255, 255, 0.1);
  --hover-border: rgba(255, 255, 255, 0.4);
  --selected-border: #ffffff;

  /* Sockets & Wires */
  --socket-empty: #1a1a1a;
  --socket-connected: #22c55e;
  --socket-connected-dark: #16a34a;
  --socket-hover-valid: #4ade80;
  --socket-hover-invalid: #ef4444;
  --wire-color: #666666;
  --wire-selected: #60a5fa;
  --wire-temp: #71717a;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #404040;
  --scrollbar-thumb-hover: #666666;

  /* Shadows */
  --shadow-editorial: 0 2px 10px rgba(0, 0, 0, 0.3), 0 10px 25px rgba(0, 0, 0, 0.4);
  --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.5);
}

/* ===== WINAMP 90s THEME ===== */
.winamp {
  /* Canvas & Backgrounds */
  --background: #0a0a0a;
  --canvas-bg: #0a0a0a;
  --node-bg: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
  --grid-color: #00ff41;
  --grid-opacity: 0.3;

  /* Text Colors */
  --foreground: #00ff41;
  --text-primary: #00ff41;
  --text-secondary: #00d9ff;
  --text-tertiary: #ff006e;

  /* Borders & Strokes */
  --border-primary: #00ff41;
  --border-secondary: rgba(0, 255, 65, 0.4);
  --border-tertiary: rgba(0, 255, 65, 0.2);

  /* UI Chrome */
  --toolbar-bg: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 100%);
  --toolbar-border: #00ff41;
  --node-header-bg: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 100%);

  /* Interactive States */
  --hover-bg: rgba(0, 255, 65, 0.1);
  --hover-border: #00ff41;
  --selected-border: #ff006e;

  /* Sockets & Wires */
  --socket-empty: #2a2a2a;
  --socket-connected: #ff006e;
  --socket-connected-dark: #cc0058;
  --socket-hover-valid: #00ff41;
  --socket-hover-invalid: #ff006e;
  --wire-color: #00d9ff;
  --wire-selected: #ff006e;
  --wire-temp: #00ff41;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #00ff41;
  --scrollbar-thumb-hover: #ff006e;

  /* Shadows */
  --shadow-editorial: 0 0 10px rgba(0, 255, 65, 0.3), 0 0 20px rgba(0, 255, 65, 0.2);
  --shadow-hover: 0 0 20px rgba(255, 0, 110, 0.5);
}

html, body {
  background-color: var(--background);
  color: var(--foreground);
  overflow: hidden; /* Infinite canvas handles scrolling */
  /* Font family is handled by Tailwind classes in layout.tsx */

  /* Prevent browser-level pinch zoom and overscroll */
  overscroll-behavior: none;
  touch-action: none; /* Prevent all touch gestures including pinch */

  /* Smooth theme transitions */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 3px;
  transition: background 0.2s ease;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Utility for hiding scrollbar but allowing scroll */
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}
.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* --- CUSTOM ANIMATION: SLOW RADIATING PULSE --- */
@keyframes pulse-ring {
  0% { transform: scale(0.8); opacity: 0.8; }
  100% { transform: scale(2.5); opacity: 0; }
}

.animate-pulse-ring {
  /* 
     EDIT HERE TO CHANGE SPEED:
     Change '10s' to a lower number (faster) or higher number (slower).
  */
  animation: pulse-ring 10s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* Force canvas elements to fill their containers */
canvas {
  display: block !important;
  width: 100% !important;
  height: 100% !important;
}

/* Markdown content styling for proper paragraph spacing */
.prose p {
  margin-bottom: 1em;
}

.prose p:last-child {
  margin-bottom: 0;
}

.prose a {
  color: #2563eb;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.prose a:hover {
  color: #1d4ed8;
}

.prose ul, .prose ol {
  margin-top: 0.5em;
  margin-bottom: 1em;
  padding-left: 1.5em;
}

.prose li {
  margin-bottom: 0.25em;
}

.prose h1, .prose h2, .prose h3 {
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  font-weight: 600;
}

.prose h1:first-child,
.prose h2:first-child,
.prose h3:first-child {
  margin-top: 0;
}

/* ===== WINAMP THEME SPECIAL EFFECTS ===== */
.winamp .node-header {
  border-style: ridge;
  border-width: 2px;
  text-shadow: 0 0 5px currentColor;
}

.winamp .node-container {
  border-style: outset;
  border-width: 2px;
  box-shadow:
    0 0 10px rgba(0, 255, 65, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.winamp .wire-path {
  filter: drop-shadow(0 0 3px currentColor);
}

.winamp .socket-glow {
  box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
}